<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <header>
      <div style="display:flex; align-items:center; gap:12px;">
        <svg height="28" width="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" style="color:var(--primary-color);">
          <polyline points="16 18 22 12 16 6"></polyline>
          <polyline points="8 6 2 12 8 18"></polyline>
        </svg>
        <h2 id="hdng">GTM & CMP Helper</h2>
        <div class="icon-btn" id="info_btn" title="Information" style="margin-left: 5px;">
          <svg height="18" width="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="12" y1="16" x2="12" y2="12"></line>
            <line x1="12" y1="8" x2="12.01" y2="8"></line>
          </svg>
        </div>
      </div>
      <div style="display:flex; align-items:center; gap:15px;">
        <div class="icon-btn" id="theme_btn" title="Toggle Theme" style="font-size: 1.1em;">üåô</div>
        <div id="lang_switcher" class="lang-switcher">
          <span id="lang_de">DE</span> | <span id="lang_en">EN</span>
        </div>
      </div>
    </header>

    <main>
      <!-- Info Overlay -->
      <div id="info_overlay" class="info-overlay" style="display:none;">
        <div class="info-content">
          <div id="option_hint"></div>
          <button id="info_close_btn">OK</button>
        </div>
      </div>

      <div id="show_checkup" class="info-box" style="display:none;">
        <b style="display:inline;">GTM Container identifiziert!</b>
        <span id="checkup_desc">Untersuche diesen Container mit Analytrix:</span> 
        <a href="#" id="igtm_inspect">GTM Container Checkup</a>
      </div>

      <div id="show_detected_cmp" class="info-box cmp-box" style="display:none;">
        <b id="label_detected_cmp" style="display:inline;">Erkannte CMP:</b>
        <span id="detected_cmp_name">Name</span> ‚Äì 
        <a href="#" id="igtm_reset_specific">CMP Reset</a>
      </div>

      <section>
        <div class="checkbox-group">
          <input type="checkbox" id="igtm_active" name="igtm_active">
          <label for="igtm_active" id="label_igtm_active">GTM-Container einf√ºgen</label>
        </div>
        <textarea id="igtm_gtm_code"></textarea>
        
        <!-- Advanced GTM Settings -->
        <details class="advanced-gtm">
          <summary id="label_advanced_settings">Erweiterte Einstellungen</summary>
          <div class="advanced-content">
            <p class="field-hint" id="label_advanced_hint">Nutze diese Parameter f√ºr GTM Umgebungen oder GA4 DebugView.</p>
            
            <label for="igtm_gtm_auth" id="label_gtm_auth">GTM Auth:</label>
            <input type="text" id="igtm_gtm_auth" placeholder="e.g. abcd123456789">
            
            <label for="igtm_gtm_preview" id="label_gtm_preview">GTM Preview:</label>
            <input type="text" id="igtm_gtm_preview" placeholder="e.g. env-1">
            
            <label id="label_gtm_position">Injektions-Position:</label>
            <div class="radio-group">
              <label><input type="radio" name="igtm_pos" value="head" checked> <span id="label_pos_head">Head</span></label>
              <label><input type="radio" name="igtm_pos" value="body"> <span id="label_pos_body">Body</span></label>
            </div>
          </div>
        </details>
      </section>

      <section>
        <div class="checkbox-group">
          <input type="checkbox" id="igtm_addinit" name="igtm_addinit">
          <label for="igtm_addinit" id="label_igtm_addinit">Push in dataLayer</label>
        </div>
        <textarea id="igtm_init"></textarea>
      </section>

      <section>
        <div class="checkbox-group">
          <input type="checkbox" id="igtm_addcode" name="igtm_addcode">
          <label for="igtm_addcode" id="label_igtm_addcode">Extra Script-Code einf√ºgen</label>
        </div>
        <textarea id="igtm_code"></textarea>
      </section>
    </main>

    <footer>
      <div class="footer-actions">
        <button id="igtm_save">üíæ Speichern &amp; neu laden</button>
        <button id="igtm_reset_consent">üóëÔ∏è Consent l√∂schen</button>
      </div>
      <div class="help-link-container">
        <span class="utfs">&#9432;</span>
        <a id="igtm_help" href="https://www.analytrix.de/gtm-helper-chrome-extension.html">Hilfe</a>
      </div>
    </footer>
  </div>

  <script src="translations.js"></script>
  <script src="popup.js"></script>
</body>
</html>
